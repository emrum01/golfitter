# 画面概要

この画面は、ユーザーがアップロードしたゴルフスイング動画をAIが分析し、詳細なフィードバックと改善提案を提供する機能を持ちます。診断結果画面でマッチしたプロゴルファーとの比較に基づいて、テンポ、姿勢、バランス、クラブパスなどの観点から総合的な評価を行います。

# 画面仕様

## 基本情報

| 項目           | 内容                         |
| -------------- | ---------------------------- |
| ページタイトル | スイング分析                 |
| 画面ID         | SWING_ANALYSIS_001           |
| 本番URL        | / (currentStep='swing-analysis') |
| storybook      | -                           |

## 画面の状態管理

| **初期表示** | 動画アップロード待機状態。アップロードエリアが表示される |
| ------------ | ------------------------------------------------------ |

## 画面要素

### ヘッダー部

**出力項目一覧**

| 項目名   | 説明   |
| -------- | ------ |
| タイトル | 「スイング分析」を表示 |
| サブタイトル | 「あなたのスイング動画をAIが詳細分析します」を表示 |

### 動画アップロードセクション

**入力項目一覧**

| 項目名   | 必須        | 種別   | デフォルト     | 文字種   | 文字数   | 説明   |
| -------- | ----------- | ------ | -------------- | -------- | -------- | ------ |
| 動画ファイル | 必須 | ファイル | - | - | 最大100MB | MP4, MOV, AVI形式対応、10秒以内推奨 |

**出力項目一覧**

| 項目名   | 説明   |
| -------- | ------ |
| アップロードエリア | ドラッグ&ドロップまたはクリックでファイル選択 |
| 動画プレビュー | アップロード後の動画再生プレーヤー |
| 別の動画を選択ボタン | 動画の再選択 |
| AI分析開始ボタン | 分析処理の開始 |
| 分析進捗バー | 分析中の進捗状況表示 |

**バリデーション一覧**

| エラー概要   | エラーメッセージ   | エラー原因   |
| ------------ | ------------------ | ------------ |
| ファイル形式エラー | 対応していないファイル形式です | video/*以外のファイル |
| ファイルサイズエラー | ファイルサイズが大きすぎます（最大100MB） | 100MB超過 |

### 分析結果表示セクション

**出力項目一覧**

| 項目名   | 説明   |
| -------- | ------ |
| 総合スコア | 0-100点の総合評価スコア |
| スコアバッジ | 優秀（80点以上）、良好（60-79点）、要改善（60点未満） |
| マッチしたプロ名 | 比較対象のプロゴルファー名 |

### 詳細分析結果セクション

**出力項目一覧**

| 項目名   | 説明   |
| -------- | ------ |
| テンポ・リズム | スコア、フィードバック、推奨事項 |
| アドレス・姿勢 | スコア、フィードバック、推奨事項 |
| バランス | スコア、フィードバック、推奨事項 |
| クラブパス | スコア、フィードバック、推奨事項 |

### 改善点・強みセクション

**出力項目一覧**

| 項目名   | 説明   |
| -------- | ------ |
| 改善ポイント | 番号付きリスト形式で改善点を表示 |
| あなたの強み | チェックマーク付きリスト形式で強みを表示 |

### アクションボタン

**出力項目一覧**

| 項目名   | 説明   |
| -------- | ------ |
| 診断結果に戻るボタン | 前画面への遷移 |
| 分析結果を保存ボタン | 結果の保存（分析完了時のみ表示） |

## 使用API

| 項目名       | 機能       |
| ------------ | ---------- |
| /api/analyze-swing | スイング動画の分析（将来実装予定） |
| /api/save-analysis | 分析結果の保存（将来実装予定） |

## エラー／例外ケース

| エラー概要   | エラーメッセージ   | エラー原因   |
| ------------ | ------------------ | ------------ |
| アップロードエラー | ファイルのアップロードに失敗しました | ネットワークエラー |
| 分析エラー | 分析処理中にエラーが発生しました | サーバーエラー |

## 権限による表示制御

| 権限     | アクセス可能URL   | 表示内容   |
| -------- | ----------------- | ---------- |
| 全ユーザー | /swing-analysis | 全機能 |

## 状態／シナリオ別表示仕様

| 状態／シナリオ | 条件                           | 表示／非表示／制御内容               | 備考                     |
| -------------- | ------------------------------ | ------------------------------------ | ------------------------ |
| 初期状態 | 画面初回表示時 | アップロードエリアのみ表示、分析結果非表示 | - |
| 動画アップロード済み | ファイル選択後 | 動画プレビューと分析開始ボタン表示 | - |
| 分析中 | AI分析開始ボタンクリック後 | 進捗バー表示、ボタン無効化 | 現在はモック処理（800ms×5段階） |
| 分析完了 | 分析処理完了後 | 全分析結果表示、保存ボタン有効化 | - |

# 画面遷移元

| 権限     | 遷移元   | アクション   |
| -------- | -------- | ------------ |
| 全ユーザー | 診断結果画面 | スイング分析ボタンクリック（currentStep='results'から遷移） |

## アクション一覧

| タイトル   | アクション方法   | 説明   |
| ---------- | ---------------- | ------ |
| 動画アップロード | ドラッグ&ドロップまたはクリック | 動画ファイルの選択 |
| 別の動画を選択 | ボタンクリック | 動画の再選択 |
| AI分析開始 | ボタンクリック | 分析処理の開始（現在はモック） |
| 診断結果に戻る | ボタンクリック | onBackプロップスで指定された処理を実行（currentStep='results'に戻る） |
| 分析結果を保存 | ボタンクリック | 分析結果の保存（未実装） |

# 備考

- 診断結果画面から遷移し、SwingAnalysisコンポーネントとして独立して実装
- 現在、分析処理はモックデータを返す実装となっている
- matchedProNameプロップスで診断結果画面でマッチしたプロゴルファー名を受け取る
- onBackプロップスで戻る処理を実装（() => setCurrentStep('results')）
- レスポンシブデザイン対応済み
- 分析結果の各スコアは色分け表示（80点以上：緑、60-79点：黄、60点未満：赤）
- 将来的にはSupabaseと連携して実際の分析処理と結果保存を実装予定