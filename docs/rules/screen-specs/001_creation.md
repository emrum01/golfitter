# 新規画面仕様書の作成

新しい画面仕様書を作成する際の完全ガイドです。このファイルだけを参照すれば、新規作成作業を完了できます。

## 作成手順

### 1. ファイル名を決める

#### 基本ルール

- 拡張子は `.spec.md` を使用
- ファイル名は `{アプリ}_{機能}_{画面・要素名}_{日本語名}.spec.md` の形式を使用
- アンダースコア（`_`）区切りを使用
- 英語部分は小文字でケバブケースを使用

#### 命名パターン

**1. ページ仕様書**

- パターン: `{アプリ}_{機能}_{画面名}-page_{日本語名}.spec.md`
- 例: `customer_mypage_mypage-page_顧客_マイページ.spec.md`

**2. UI要素仕様書**

- パターン: `{アプリ}_{機能}__{要素名}_{日本語名}.spec.md`
- 要素の種類:
  - `modal`: モーダルウィンドウ
  - `tab`: タブ
  - `section`: セクション
  - `drawer`: ドロワー
- 例: `admin_customer-detail__affected-area-image-tab_管理者_顧客詳細__患部画像タブ.spec.md`

**3. 共通仕様書**

- パターン: `shared_{機能名}_{日本語名}.spec.md`
- 例: `shared_components_checkbox_共通コンポーネント_チェックボックス.spec.md`

**4. インデックス仕様書**

- パターン: `{アプリ}_{機能}_{日本語名}.spec.index.md`
- 例: `admin_customer-detail_管理者_顧客詳細機能.spec.index.md`

### 2. テンプレートをコピー

1. [TEMPLATE.md](mdc:docs/screen-specs/TEMPLATE.md) をコピー
2. 決定したファイル名でscreen-specs/ディレクトリに保存

### 3. 基本情報を記入

#### 必須項目

- **画面の目的**: この画面が何を実現するか
- **対象ユーザー**: 権限名は以下の正式名称を使用
  - operation アプリ（医師、看護師、カウンセラー、発送オペレーター、全て）
  - admin アプリ（管理者）
  - customer アプリ（ログイン（認証）済み顧客、未ログイン（認証）顧客）
- **前提条件**: この画面にアクセスするための条件

#### 開発環境 URL

開発環境 URL については [003_maintenance.md#開発環境 url リンク管理](./003_maintenance.md#開発環境urlリンク管理) を参照してください。

### 4. ディレクトリ構造の理解

現在は**フラットな単一階層構造**を採用しています。

```
docs/
└── screen-specs/
    ├── README.md
    ├── TEMPLATE.md
    ├── admin_customer-detail-page_管理者_顧客詳細.spec.md
    ├── admin_customer-detail__affected-area-image-tab_管理者_顧客詳細__患部画像タブ.spec.md
    ├── customer_mypage_mypage-page_顧客_マイページ.spec.md
    └── ...
```

#### 構造の特徴

- 全ての仕様書ファイルが同一階層に配置
- ファイル名の命名規則でアプリ・機能・画面を識別
- ディレクトリによる分類は行わない
- インデックスファイル（`.spec.index.md`）で機能単位のまとめを行う

### 5. ファイル分割の判断

#### 分割基準

**1. URLベースでの分割**

- 基本的に1つのURLにつき1つのページ仕様書を作成
- 例：
  - `/mypage` → `customer_mypage_顧客_マイページ.spec.md`
  - `/admin/customers` → `admin_customer-list-page_管理者_顧客一覧.spec.md`

**2. UI要素での分割**

- 複雑なタブ、モーダル、セクションは個別の仕様書として作成
- 例：
  - 顧客詳細の患部画像タブ → `admin_customer-detail__affected-area-image-tab_管理者_顧客詳細__患部画像タブ.spec.md`

**3. インデックスファイル（`.spec.index.md`）の活用**

- 機能全体の概要をまとめるファイル
- 関連する仕様書の一覧を記載
- 画面遷移図を含める

### 6. 参照の基本ルール

フラット構造のため、参照は以下の形式を使用：

- **同一階層での参照**: `./ファイル名.spec.md`
- **MDC形式での参照**: `[表示テキスト](mdc:docs/screen-specs/ファイル名.spec.md)`
- **セクション参照**: `./ファイル名.spec.md#section`

### 7. ファイル管理の利点

- **検索性**: ファイル名だけで対象機能が分かる
- **一覧性**: 同じディレクトリ内で関連ファイルを確認できる
- **相互参照**: 相対パスが単純になる

## 作成後の次のステップ

新規ファイルを作成したら：

1. **記述・更新**: [002_writing.md](./002_writing.md) を参照して内容を記述
2. **品質チェック**: [003_maintenance.md](./003_maintenance.md) を参照して品質を確認

## よくある質問

**Q: 既存の画面に新しいタブを追加する場合は？**
A: 複雑なタブの場合は別ファイルとして作成し、既存ファイルから参照

**Q: 共通コンポーネントはどう扱う？**
A: `shared_components_` で始まる命名で専用ファイルを作成

**Q: 機能が複雑で複数ファイルに分かれる場合は？**
A: `.spec.index.md` でインデックスファイルを作成し、関連ファイルをまとめる
