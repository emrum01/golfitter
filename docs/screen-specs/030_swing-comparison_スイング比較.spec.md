# 画面概要

この画面は、ゴルフスイングの動画を比較分析するための画面です。ユーザーは複数のスイング動画を並べて比較し、分析結果を確認することができます。

# 画面仕様

## 基本情報

| 項目           | 内容                         |
| -------------- | ---------------------------- |
| ページタイトル | スイング比較                 |
| 画面ID         | swing-comparison             |
| 本番URL        | /swing-comparison           |
| storybook      | ----                        |

## 画面の状態管理

| **初期表示** | SwingComparisonコンポーネントを表示、分析結果は未取得状態 |
| ------------ | -------------------------------------------------------- |

## 画面要素

### SwingComparisonコンポーネント

**入力項目一覧**

| 項目名   | 必須        | 種別        | デフォルト     | 文字種   | 文字数   | 説明                            |
| -------- | ----------- | ----------- | -------------- | -------- | -------- | ------------------------------- |
| ----     | ----        | ----        | ----           | ----     | ----     | SwingComparisonコンポーネント内で管理 |

**出力項目一覧**

| 項目名                  | 説明                                              |
| ---------------------- | ------------------------------------------------- |
| SwingComparisonコンポーネント | スイング比較のメインコンポーネントを表示            |
| 分析結果               | analysisResultがある場合、分析結果を表示           |
| ローディング状態        | isLoadingがtrueの場合、ローディング表示           |
| エラー表示              | errorがある場合、エラーメッセージを表示            |

**バリデーション一覧**

| エラー概要   | エラーメッセージ   | エラー原因          |
| ----------- | ----------------- | ------------------ |
| 分析エラー   | errorステートの内容 | 分析処理でエラー発生 |

## 使用API

| 項目名       | 機能                                    |
| ----------- | --------------------------------------- |
| ----        | API呼び出しはSwingComparisonコンポーネント内で実装 |

## エラー／例外ケース

| エラー概要       | エラーメッセージ         | エラー原因              |
| --------------- | ----------------------- | ---------------------- |
| 分析処理エラー   | errorステートに設定される値 | 動画分析処理の失敗      |

## 権限による表示制御

| 権限             | アクセス可能URL    | 表示内容                     |
| ---------------- | ----------------- | --------------------------- |
| 全てのユーザー   | /swing-comparison | スイング比較画面を表示       |

## 状態／シナリオ別表示仕様

| 状態／シナリオ   | 条件                            | 表示／非表示／制御内容                              | 備考                                |
| --------------- | ------------------------------- | -------------------------------------------------- | ----------------------------------- |
| 初期表示         | ページロード時                   | SwingComparisonコンポーネントを表示                | analysisResultはnull                |
| 分析中          | isLoadingがtrue                 | ローディング表示                                   | handleAnalyzeで制御                 |
| 分析完了        | analysisResultが設定される       | 分析結果を表示                                     | onAnalysisCompleteで結果を受け取る   |
| エラー発生      | errorが設定される               | エラーメッセージを表示                              | エラー時の表示制御                  |
| 戻る操作        | onBackが呼ばれる                | 診断結果画面（/?currentStep=results）に遷移        | URLパラメータ付きで遷移             |

# 画面遷移元

| 権限             | 遷移元                   | アクション                    |
| ---------------- | ----------------------- | ---------------------------- |
| 全てのユーザー   | 診断結果画面            | スイング比較ボタンクリック     |
| 全てのユーザー   | その他の画面            | URLの直接入力                 |

## アクション一覧

| タイトル         | アクション方法                  | 説明                                          |
| --------------- | ------------------------------ | --------------------------------------------- |
| 戻る            | SwingComparisonのonBack         | 診断結果画面に戻る（currentStep=resultsパラメータ付き） |
| 分析開始        | handleAnalyze                   | 分析処理を開始し、ローディング状態にする         |
| 分析完了        | onAnalysisComplete              | 分析結果を受け取り、表示を更新                  |

# 備考

- SwingComparisonコンポーネントに分析ロジックの詳細が実装されている
- searchParamsを使用しているが、現在のコードでは実際には使用されていない
- 分析結果の型はAnalysisResultとして定義されている（@/lib/types/swing-analysis）