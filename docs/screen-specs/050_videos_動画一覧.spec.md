# 画面概要

この画面は、保存されているゴルフスイング動画を一覧表示し、スワイプで動画を切り替えながら再生できるビューアー画面です。モバイル向けに最適化されており、全画面表示で動画を閲覧できます。

# 画面仕様

## 基本情報

| 項目           | 内容                         |
| -------------- | ---------------------------- |
| ページタイトル | 動画一覧                     |
| 画面ID         | videos                       |
| 本番URL        | /videos                     |
| storybook      | ----                        |

## 画面の状態管理

| **初期表示** | 動画一覧を読み込み中のローディング表示 |
| ------------ | ------------------------------------- |

## 画面要素

### ローディング表示

**出力項目一覧**

| 項目名           | 説明                                    |
| ---------------- | --------------------------------------- |
| 背景             | 黒背景（全画面）                        |
| メッセージ       | 「動画を読み込み中...」を白文字で表示    |

### 動画なし表示

**出力項目一覧**

| 項目名                  | 説明                                         |
| ---------------------- | -------------------------------------------- |
| 背景                   | 黒背景（全画面）                             |
| メッセージ             | 「まだ動画がアップロードされていません」を表示 |
| アップロードボタン      | 「動画をアップロード」ボタンを表示            |

### 動画ビューアー

**出力項目一覧**

| 項目名              | 説明                                              |
| ------------------ | ------------------------------------------------- |
| 戻るボタン         | 左上に配置、ArrowLeftアイコン                      |
| スワイパー         | Swiperコンポーネントで動画を横スワイプ可能         |
| ナビゲーション      | 前後の動画への移動ボタン（PCのみ表示）             |
| ページネーション    | 現在の動画位置を示すドット                         |
| 動画プレイヤー      | MobileVideoPlayerコンポーネントで各動画を表示      |
| 動画タイトル        | 「{動画名} ({現在の番号}/{総数})」形式で表示       |

**バリデーション一覧**

| エラー概要           | エラーメッセージ                           | エラー原因                    |
| ------------------- | ----------------------------------------- | ---------------------------- |
| 動画読み込みエラー   | コンソールに「Failed to load videos」      | videoStorage.getAllVideosの失敗 |

## 使用API

| 項目名                          | 機能                          |
| ------------------------------ | ----------------------------- |
| videoStorage.getAllVideos()     | 保存済み動画の一覧を取得       |
| videoStorage.getVideoUrl()      | 動画のBlobURLを生成           |

## エラー／例外ケース

| エラー概要           | エラーメッセージ                   | エラー原因                    |
| ------------------- | --------------------------------- | ---------------------------- |
| 動画読み込み失敗     | Failed to load videos             | ストレージアクセスエラー       |

## 権限による表示制御

| 権限             | アクセス可能URL | 表示内容                     |
| ---------------- | -------------- | --------------------------- |
| 全てのユーザー   | /videos        | 動画一覧ビューアーを表示      |

## 状態／シナリオ別表示仕様

| 状態／シナリオ     | 条件                      | 表示／非表示／制御内容                              | 備考                           |
| ----------------- | ------------------------ | -------------------------------------------------- | ----------------------------- |
| 読み込み中        | loading === true         | ローディング表示                                   | 初期状態                       |
| 動画なし          | videos.length === 0      | 動画なしメッセージとアップロードボタンを表示         | /swing-uploadへのリンク        |
| 動画あり          | videos.length > 0        | Swiperで動画一覧を表示                              | 全画面表示                     |
| スワイプ操作      | 左右スワイプ             | 前後の動画に切り替え                                | タッチデバイス対応             |
| ナビゲーション    | 矢印ボタンクリック        | 前後の動画に切り替え                                | PC（640px以上）のみ表示        |
| クリーンアップ    | コンポーネントアンマウント時 | BlobURLを解放                                      | メモリリーク防止               |

# 画面遷移元

| 権限             | 遷移元          | アクション                  |
| ---------------- | -------------- | -------------------------- |
| 全てのユーザー   | 診断結果画面    | 動画一覧ボタンクリック       |
| 全てのユーザー   | その他の画面    | URLの直接入力               |

## アクション一覧

| タイトル              | アクション方法          | 説明                                      |
| -------------------- | ---------------------- | ----------------------------------------- |
| 診断結果に戻る        | 戻るボタンクリック      | /?currentStep=resultsに遷移               |
| 動画アップロード      | アップロードボタンクリック | /swing-uploadに遷移（動画なし時のみ）      |
| 次の動画へ           | 右スワイプ/右矢印クリック | 次の動画を表示                            |
| 前の動画へ           | 左スワイプ/左矢印クリック | 前の動画を表示                            |

# 備考

- Swiper.jsを使用してスワイプ操作を実装
- モバイル（640px以下）では矢印ナビゲーションを非表示
- 動画のBlobURLは適切にクリーンアップされる
- 全画面黒背景で没入感のある動画視聴体験を提供
- styled-jsx を使用してSwiperのスタイルをカスタマイズ